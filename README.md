# OnyxChat - Telegram Bot для поддержки клиентов

Telegram бот для управления поддержкой клиентов с админ-панелью для операторов.

## Возможности

- **Управление сессиями**: Создание, назначение и закрытие сессий поддержки
- **Админ-панель**: Интерфейс для операторов с управлением чатами
- **Логгирование сообщений**: Полное логирование всех сообщений в базе данных
- **Управление вложениями**: Поддержка файлов, фото и голосовых сообщений
- **Статистика**: Отслеживание закрытых чатов и производительности

## Установка

1. Клонируйте репозиторий:

```bash
git clone <repository-url>
cd onyxChat
```

2. Установите зависимости:

```bash
pip install -e .
```

3. Создайте файл `.env` с переменными окружения:

```env
TOKEN=your_telegram_bot_token
ADMINS_ID=123456789,987654321
DB_HOST=localhost
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_DATABASE=onyxchat
```

4. Запустите бота:

```bash
python main.py
```

## Структура проекта

```
onyxChat/
├── handlers/           # Обработчики сообщений и колбэков
│   ├── messages/      # Обработчики текстовых сообщений
│   └── callbacks/     # Обработчики inline-кнопок
├── keyboards/         # Клавиатуры для интерфейса
├── middlewares/       # Промежуточное ПО
├── sql/              # SQL запросы и схемы БД
├── utils/            # Утилиты (логгирование, рендеринг)
├── config.py         # Конфигурация
├── main.py           # Точка входа
└── states.py         # FSM состояния
```

## Архитектура

- **aiogram 3.x**: Асинхронный фреймворк для Telegram Bot API
- **aiomysql**: Асинхронный драйвер для MySQL
- **FSM**: Управление состояниями для админ-чата
- **Middleware**: Проверка прав, логгирование, работа с БД

## Разработка

Для разработки установите дополнительные зависимости:

```bash
pip install -e ".[dev]"
```

Запуск линтеров:

```bash
black .
flake8 .
mypy .
```

## Лицензия

MIT License
